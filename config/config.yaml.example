# Incident Copilot Configuration
# Copy this to config/config.yaml and customize

# Server settings
server:
  host: "0.0.0.0"
  port: 8080

# AI Provider settings
ai:
  # Options: ollama, openai, anthropic
  provider: ollama
  
  # For Ollama (local)
  endpoint: http://localhost:11434
  model: llama3.2:3b
  
  # For OpenAI (set OPENAI_API_KEY env var)
  # provider: openai
  # model: gpt-4o-mini
  
  # For Anthropic (set ANTHROPIC_API_KEY env var)
  # provider: anthropic
  # model: claude-3-haiku-20240307
  
  # Analysis settings
  max_log_lines: 500
  timeout: 120

# Log sources to gather from
log_sources:
  - name: kubernetes-production
    type: kubernetes
    namespaces:
      - production
      - default
    # context: my-cluster  # Optional: kubectl context
  
  - name: kubernetes-staging
    type: kubernetes
    namespaces:
      - staging
  
  - name: application-logs
    type: file
    paths:
      - /var/log/app/*.log
      - /var/log/nginx/error.log
  
  - name: git-history
    type: git
    repos:
      - /path/to/your/repo
    max_commits: 20
  
  # Elasticsearch example
  # - name: elasticsearch-logs
  #   type: elasticsearch
  #   host: localhost:9200
  #   index_pattern: logs-*
  #   auth:
  #     username: elastic
  #     password: ${ELASTIC_PASSWORD}

# Time range for log gathering (in minutes)
gather_time_range: 60

# Notification settings
notifications:
  enabled: true
  
  slack:
    webhook_url: ${SLACK_WEBHOOK_URL}
    channel: "#incidents"
    username: "Incident Copilot"
    icon_emoji: ":rotating_light:"
  
  # teams:
  #   webhook_url: ${TEAMS_WEBHOOK_URL}
  
  # pagerduty:
  #   api_key: ${PAGERDUTY_API_KEY}

# Storage settings
storage:
  backend: sqlite  # sqlite, json, postgresql
  path: incidents.db
  
  # PostgreSQL example:
  # backend: postgresql
  # connection_string: ${DATABASE_URL}

# Post-mortem generation
templates:
  # Custom template path (optional)
  # template_path: templates/postmortem.md

# Fix automation (USE WITH CAUTION)
automation:
  auto_execute: false
  dry_run: true
  allowed_risk_levels:
    - low
